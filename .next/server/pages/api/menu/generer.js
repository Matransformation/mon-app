"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/menu/generer";
exports.ids = ["pages/api/menu/generer"];
exports.modules = {

/***/ "(api-node)/./lib/prisma.js":
/*!***********************!*\
  !*** ./lib/prisma.js ***!
  \***********************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// lib/prisma.js\n\nconst { PrismaClient } = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\nlet prisma;\nif (false) {} else {\n    if (!global.prisma) {\n        global.prisma = new PrismaClient();\n    }\n    prisma = global.prisma;\n}\nmodule.exports = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9wcmlzbWEuanMiLCJtYXBwaW5ncyI6IkFBQUEsZ0JBQWdCOztBQUNoQixNQUFNLEVBQUVBLFlBQVksRUFBRSxHQUFHQyxtQkFBT0EsQ0FBQyxzQ0FBZ0I7QUFFakQsSUFBSUM7QUFFSixJQUFJQyxLQUFxQyxFQUFFLEVBRTFDLE1BQU07SUFDTCxJQUFJLENBQUNDLE9BQU9GLE1BQU0sRUFBRTtRQUNsQkUsT0FBT0YsTUFBTSxHQUFHLElBQUlGO0lBQ3RCO0lBQ0FFLFNBQVNFLE9BQU9GLE1BQU07QUFDeEI7QUFFQUcsT0FBT0MsT0FBTyxHQUFHSiIsInNvdXJjZXMiOlsiL1VzZXJzL3dvbG1lcnJvbWFpbi9EZXNrdG9wL21hdHJhbnNmb3JtYXRpb24tc3RhcnRlci9saWIvcHJpc21hLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGxpYi9wcmlzbWEuanNcbmNvbnN0IHsgUHJpc21hQ2xpZW50IH0gPSByZXF1aXJlKFwiQHByaXNtYS9jbGllbnRcIik7XG5cbmxldCBwcmlzbWE7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgcHJpc21hID0gbmV3IFByaXNtYUNsaWVudCgpO1xufSBlbHNlIHtcbiAgaWYgKCFnbG9iYWwucHJpc21hKSB7XG4gICAgZ2xvYmFsLnByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKTtcbiAgfVxuICBwcmlzbWEgPSBnbG9iYWwucHJpc21hO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHByaXNtYTtcbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJyZXF1aXJlIiwicHJpc21hIiwicHJvY2VzcyIsImdsb2JhbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./lib/prisma.js\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmenu%2Fgenerer&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fmenu%2Fgenerer.js&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmenu%2Fgenerer&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fmenu%2Fgenerer.js&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_menu_generer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/menu/generer.js */ \"(api-node)/./pages/api/menu/generer.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_menu_generer_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_menu_generer_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/menu/generer\",\n        pathname: \"/api/menu/generer\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_menu_generer_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGbWVudSUyRmdlbmVyZXImcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRm1lbnUlMkZnZW5lcmVyLmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNFO0FBQzFEO0FBQ3dEO0FBQ3hEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyx1REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsdURBQVE7QUFDcEM7QUFDTyx3QkFBd0IseUdBQW1CO0FBQ2xEO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvbWVudS9nZW5lcmVyLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9tZW51L2dlbmVyZXJcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9tZW51L2dlbmVyZXJcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmenu%2Fgenerer&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fmenu%2Fgenerer.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/menu/generer.js":
/*!***********************************!*\
  !*** ./pages/api/menu/generer.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/prisma */ \"(api-node)/./lib/prisma.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_lib_prisma__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _barrel_optimize_names_addDays_endOfWeek_startOfWeek_date_fns__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! __barrel_optimize__?names=addDays,endOfWeek,startOfWeek!=!date-fns */ \"(api-node)/__barrel_optimize__?names=addDays,endOfWeek,startOfWeek!=!./node_modules/date-fns/index.js\");\n// pages/api/menu/generer.js\n\n\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        res.setHeader(\"Allow\", [\n            \"POST\"\n        ]);\n        return res.status(405).json({\n            message: `Méthode ${req.method} non autorisée`\n        });\n    }\n    // On récupère userId et, si fourni, weekStart en ISO\n    const { userId, weekStart: weekStartIso } = req.body;\n    if (!userId) {\n        return res.status(400).json({\n            message: \"userId manquant.\"\n        });\n    }\n    try {\n        // 1) Vérifier que l’utilisateur existe\n        const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0___default().user.findUnique({\n            where: {\n                id: userId\n            }\n        });\n        if (!user) {\n            return res.status(404).json({\n                message: \"Utilisateur non trouvé.\"\n            });\n        }\n        // 2) Calculer début et fin de la semaine :\n        //    si weekStartIso est passé, on l'utilise, sinon on prend today.\n        const baseDate = weekStartIso ? new Date(weekStartIso) : new Date();\n        const weekStart = (0,_barrel_optimize_names_addDays_endOfWeek_startOfWeek_date_fns__WEBPACK_IMPORTED_MODULE_1__.startOfWeek)(baseDate, {\n            weekStartsOn: 1\n        });\n        const weekEnd = (0,_barrel_optimize_names_addDays_endOfWeek_startOfWeek_date_fns__WEBPACK_IMPORTED_MODULE_1__.endOfWeek)(weekStart, {\n            weekStartsOn: 1\n        });\n        // 3) Récupérer les menus existants pour pouvoir supprimer leurs accompagnements\n        const toRemove = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0___default().menuJournalier.findMany({\n            where: {\n                userId,\n                date: {\n                    gte: weekStart,\n                    lte: weekEnd\n                }\n            },\n            select: {\n                id: true\n            }\n        });\n        const menuIds = toRemove.map((m)=>m.id);\n        // 4) Supprimer d’abord tous les accompagnements liés\n        if (menuIds.length) {\n            await _lib_prisma__WEBPACK_IMPORTED_MODULE_0___default().accompagnement.deleteMany({\n                where: {\n                    menuId: {\n                        in: menuIds\n                    }\n                }\n            });\n        }\n        // 5) Puis supprimer les menus eux‑mêmes\n        await _lib_prisma__WEBPACK_IMPORTED_MODULE_0___default().menuJournalier.deleteMany({\n            where: {\n                userId,\n                date: {\n                    gte: weekStart,\n                    lte: weekEnd\n                }\n            }\n        });\n        // 6) Préparer la génération\n        const repartition = {\n            \"petit-dejeuner\": 0.3,\n            dejeuner: 0.4,\n            collation: 0.05,\n            diner: 0.25\n        };\n        // 7) Charger toutes les recettes + ingrédients + sideTypes + allowedSides\n        const recettes = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0___default().recette.findMany({\n            include: {\n                categories: {\n                    include: {\n                        category: true\n                    }\n                },\n                ingredients: {\n                    include: {\n                        ingredient: {\n                            include: {\n                                sideTypes: true\n                            }\n                        }\n                    }\n                },\n                allowedSides: true\n            }\n        });\n        // 8) Charger tous les ingrédients (pour collation)\n        const ingredients = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0___default().ingredient.findMany({\n            include: {\n                sideTypes: true\n            }\n        });\n        // 9) Construire les créations\n        const creations = [];\n        for(let i = 0; i < 7; i++){\n            const day = (0,_barrel_optimize_names_addDays_endOfWeek_startOfWeek_date_fns__WEBPACK_IMPORTED_MODULE_1__.addDays)(weekStart, i);\n            for (const type of Object.keys(repartition)){\n                // base des données à créer\n                const data = {\n                    user: {\n                        connect: {\n                            id: userId\n                        }\n                    },\n                    date: day,\n                    repasType: type\n                };\n                // 9.1) Choix de la recette (sauf collation)\n                let recette = null;\n                if (type !== \"collation\") {\n                    const pool = recettes.filter((r)=>{\n                        const cats = r.categories.map((c)=>c.category.name.toLowerCase());\n                        if (type === \"petit-dejeuner\") {\n                            return cats.includes(\"petit déjeuner\");\n                        } else {\n                            return !cats.includes(\"petit déjeuner\") && !cats.includes(\"collation\");\n                        }\n                    });\n                    if (pool.length) {\n                        recette = pool[Math.floor(Math.random() * pool.length)];\n                    }\n                }\n                // 9.2) Si on a une recette, on applique scalabilité + clamp DAIRY + connect\n                if (recette) {\n                    const hasEgg = recette.ingredients.some((ri)=>ri.ingredient.name.toLowerCase().includes(\"oeuf\"));\n                    if (!hasEgg) {\n                        // calcul des totaux\n                        const totals = recette.ingredients.reduce((s, ri)=>({\n                                p: s.p + ri.ingredient.protein * ri.quantity / 100,\n                                f: s.f + ri.ingredient.fat * ri.quantity / 100,\n                                g: s.g + ri.ingredient.carbs * ri.quantity / 100\n                            }), {\n                            p: 0,\n                            f: 0,\n                            g: 0\n                        });\n                        // objectifs\n                        const target = {\n                            p: user.poids * 1.8 * repartition[type],\n                            f: user.metabolismeCible * 0.3 / 9 * repartition[type],\n                            g: (user.metabolismeCible - user.poids * 1.8 * 4 - user.metabolismeCible * 0.3) / 4 * repartition[type]\n                        };\n                        // facteur minimal\n                        let factor = Math.min(target.p / totals.p, target.f / totals.f, target.g / totals.g);\n                        // clamp DAIRY à 150g\n                        recette.ingredients.forEach((ri)=>{\n                            const isDairy = ri.ingredient.sideTypes.some((st)=>st.sideType === \"DAIRY\");\n                            if (isDairy && ri.quantity * factor > 150) {\n                                factor = Math.min(factor, 150 / ri.quantity);\n                            }\n                        });\n                        // appliquer le facteur\n                        recette.ingredients = recette.ingredients.map((ri)=>({\n                                ...ri,\n                                quantity: Math.round(ri.quantity * factor)\n                            }));\n                    }\n                    data.recette = {\n                        connect: {\n                            id: recette.id\n                        }\n                    };\n                } else if (type === \"collation\") {\n                    const pool = ingredients.filter((i)=>i.protein >= 10 && i.sideTypes.some((st)=>[\n                                \"PROTEIN\",\n                                \"DAIRY\"\n                            ].includes(st.sideType)));\n                    if (pool.length) {\n                        const ing = pool[Math.floor(Math.random() * pool.length)];\n                        const qty = Math.min(150, Math.round(user.poids * 1.8 * repartition[type] / (ing.protein / 100)));\n                        data.accompagnements = {\n                            create: [\n                                {\n                                    ingredient: {\n                                        connect: {\n                                            id: ing.id\n                                        }\n                                    },\n                                    quantity: qty\n                                }\n                            ]\n                        };\n                    }\n                }\n                // on ajoute la création à la liste\n                creations.push(_lib_prisma__WEBPACK_IMPORTED_MODULE_0___default().menuJournalier.create({\n                    data\n                }));\n            }\n        }\n        // 10) Lancer les créations en parallèle\n        await Promise.all(creations);\n        return res.status(200).json({\n            message: \"Menu généré avec règles appliquées.\"\n        });\n    } catch (err) {\n        console.error(\"Erreur génération menu :\", err);\n        return res.status(500).json({\n            message: \"Erreur serveur lors de la génération\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9tZW51L2dlbmVyZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLDRCQUE0QjtBQUVhO0FBQ2tCO0FBRTVDLGVBQWVJLFFBQVFDLEdBQUcsRUFBRUMsR0FBRztJQUM1QyxJQUFJRCxJQUFJRSxNQUFNLEtBQUssUUFBUTtRQUN6QkQsSUFBSUUsU0FBUyxDQUFDLFNBQVM7WUFBQztTQUFPO1FBQy9CLE9BQU9GLElBQ0pHLE1BQU0sQ0FBQyxLQUNQQyxJQUFJLENBQUM7WUFBRUMsU0FBUyxDQUFDLFFBQVEsRUFBRU4sSUFBSUUsTUFBTSxDQUFDLGNBQWMsQ0FBQztRQUFDO0lBQzNEO0lBRUEscURBQXFEO0lBQ3JELE1BQU0sRUFBRUssTUFBTSxFQUFFQyxXQUFXQyxZQUFZLEVBQUUsR0FBR1QsSUFBSVUsSUFBSTtJQUNwRCxJQUFJLENBQUNILFFBQVE7UUFDWCxPQUFPTixJQUFJRyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLFNBQVM7UUFBbUI7SUFDNUQ7SUFFQSxJQUFJO1FBQ0YsdUNBQXVDO1FBQ3ZDLE1BQU1LLE9BQU8sTUFBTWhCLHVEQUFXLENBQUNpQixVQUFVLENBQUM7WUFBRUMsT0FBTztnQkFBRUMsSUFBSVA7WUFBTztRQUFFO1FBQ2xFLElBQUksQ0FBQ0ksTUFBTTtZQUNULE9BQU9WLElBQUlHLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLFNBQVM7WUFBMEI7UUFDbkU7UUFFQSwyQ0FBMkM7UUFDM0Msb0VBQW9FO1FBQ3BFLE1BQU1TLFdBQVdOLGVBQWUsSUFBSU8sS0FBS1AsZ0JBQWdCLElBQUlPO1FBQzdELE1BQU1SLFlBQVlaLDBHQUFXQSxDQUFDbUIsVUFBVTtZQUFFRSxjQUFjO1FBQUU7UUFDMUQsTUFBTUMsVUFBWXJCLHdHQUFTQSxDQUFDVyxXQUFZO1lBQUVTLGNBQWM7UUFBRTtRQUUxRCxnRkFBZ0Y7UUFDaEYsTUFBTUUsV0FBVyxNQUFNeEIsaUVBQXFCLENBQUMwQixRQUFRLENBQUM7WUFDcERSLE9BQU87Z0JBQ0xOO2dCQUNBZSxNQUFNO29CQUFFQyxLQUFLZjtvQkFBV2dCLEtBQUtOO2dCQUFRO1lBQ3ZDO1lBQ0FPLFFBQVE7Z0JBQUVYLElBQUk7WUFBSztRQUNyQjtRQUNBLE1BQU1ZLFVBQVVQLFNBQVNRLEdBQUcsQ0FBQyxDQUFDQyxJQUFNQSxFQUFFZCxFQUFFO1FBRXhDLHFEQUFxRDtRQUNyRCxJQUFJWSxRQUFRRyxNQUFNLEVBQUU7WUFDbEIsTUFBTWxDLGlFQUFxQixDQUFDb0MsVUFBVSxDQUFDO2dCQUNyQ2xCLE9BQU87b0JBQUVtQixRQUFRO3dCQUFFQyxJQUFJUDtvQkFBUTtnQkFBRTtZQUNuQztRQUNGO1FBRUEsd0NBQXdDO1FBQ3hDLE1BQU0vQixpRUFBcUIsQ0FBQ29DLFVBQVUsQ0FBQztZQUNyQ2xCLE9BQU87Z0JBQ0xOO2dCQUNBZSxNQUFNO29CQUFFQyxLQUFLZjtvQkFBV2dCLEtBQUtOO2dCQUFRO1lBQ3ZDO1FBQ0Y7UUFFQSw0QkFBNEI7UUFDNUIsTUFBTWdCLGNBQWM7WUFDbEIsa0JBQWtCO1lBQ2xCQyxVQUFrQjtZQUNsQkMsV0FBa0I7WUFDbEJDLE9BQWtCO1FBQ3BCO1FBRUEsMEVBQTBFO1FBQzFFLE1BQU1DLFdBQVcsTUFBTTNDLDBEQUFjLENBQUMwQixRQUFRLENBQUM7WUFDN0NtQixTQUFTO2dCQUNQQyxZQUFZO29CQUFFRCxTQUFTO3dCQUFFRSxVQUFVO29CQUFLO2dCQUFFO2dCQUMxQ0MsYUFBYTtvQkFDWEgsU0FBUzt3QkFBRUksWUFBWTs0QkFBRUosU0FBUztnQ0FBRUssV0FBVzs0QkFBSzt3QkFBRTtvQkFBRTtnQkFDMUQ7Z0JBQ0FDLGNBQWM7WUFDaEI7UUFDRjtRQUVBLG1EQUFtRDtRQUNuRCxNQUFNSCxjQUFjLE1BQU1oRCw2REFBaUIsQ0FBQzBCLFFBQVEsQ0FBQztZQUNuRG1CLFNBQVM7Z0JBQUVLLFdBQVc7WUFBSztRQUM3QjtRQUVBLDhCQUE4QjtRQUM5QixNQUFNRSxZQUFZLEVBQUU7UUFDcEIsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUksR0FBR0EsSUFBSztZQUMxQixNQUFNQyxNQUFNbkQsc0dBQU9BLENBQUNVLFdBQVd3QztZQUUvQixLQUFLLE1BQU1FLFFBQVFDLE9BQU9DLElBQUksQ0FBQ2xCLGFBQWM7Z0JBQzNDLDJCQUEyQjtnQkFDM0IsTUFBTW1CLE9BQU87b0JBQ1gxQyxNQUFXO3dCQUFFMkMsU0FBUzs0QkFBRXhDLElBQUlQO3dCQUFPO29CQUFFO29CQUNyQ2UsTUFBVzJCO29CQUNYTSxXQUFXTDtnQkFDYjtnQkFFQSw0Q0FBNEM7Z0JBQzVDLElBQUlYLFVBQVU7Z0JBQ2QsSUFBSVcsU0FBUyxhQUFhO29CQUN4QixNQUFNTSxPQUFPbEIsU0FBU21CLE1BQU0sQ0FBQyxDQUFDQzt3QkFDNUIsTUFBTUMsT0FBT0QsRUFBRWpCLFVBQVUsQ0FBQ2QsR0FBRyxDQUFDLENBQUNpQyxJQUM3QkEsRUFBRWxCLFFBQVEsQ0FBQ21CLElBQUksQ0FBQ0MsV0FBVzt3QkFFN0IsSUFBSVosU0FBUyxrQkFBa0I7NEJBQzdCLE9BQU9TLEtBQUtJLFFBQVEsQ0FBQzt3QkFDdkIsT0FBTzs0QkFDTCxPQUNFLENBQUNKLEtBQUtJLFFBQVEsQ0FBQyxxQkFDZixDQUFDSixLQUFLSSxRQUFRLENBQUM7d0JBRW5CO29CQUNGO29CQUNBLElBQUlQLEtBQUszQixNQUFNLEVBQUU7d0JBQ2ZVLFVBQVVpQixJQUFJLENBQUNRLEtBQUtDLEtBQUssQ0FBQ0QsS0FBS0UsTUFBTSxLQUFLVixLQUFLM0IsTUFBTSxFQUFFO29CQUN6RDtnQkFDRjtnQkFFQSw0RUFBNEU7Z0JBQzVFLElBQUlVLFNBQVM7b0JBQ1gsTUFBTTRCLFNBQVM1QixRQUFRSSxXQUFXLENBQUN5QixJQUFJLENBQUMsQ0FBQ0MsS0FDdkNBLEdBQUd6QixVQUFVLENBQUNpQixJQUFJLENBQUNDLFdBQVcsR0FBR0MsUUFBUSxDQUFDO29CQUc1QyxJQUFJLENBQUNJLFFBQVE7d0JBQ1gsb0JBQW9CO3dCQUNwQixNQUFNRyxTQUFTL0IsUUFBUUksV0FBVyxDQUFDNEIsTUFBTSxDQUN2QyxDQUFDQyxHQUFHSCxLQUFRO2dDQUNWSSxHQUFHRCxFQUFFQyxDQUFDLEdBQUcsR0FBSTdCLFVBQVUsQ0FBQzhCLE9BQU8sR0FBR0wsR0FBR00sUUFBUSxHQUFJO2dDQUNqREMsR0FBR0osRUFBRUksQ0FBQyxHQUFHLEdBQUloQyxVQUFVLENBQUNpQyxHQUFHLEdBQU9SLEdBQUdNLFFBQVEsR0FBSTtnQ0FDakRHLEdBQUdOLEVBQUVNLENBQUMsR0FBRyxHQUFJbEMsVUFBVSxDQUFDbUMsS0FBSyxHQUFLVixHQUFHTSxRQUFRLEdBQUk7NEJBQ25ELElBQ0E7NEJBQUVGLEdBQUc7NEJBQUdHLEdBQUc7NEJBQUdFLEdBQUc7d0JBQUU7d0JBRXJCLFlBQVk7d0JBQ1osTUFBTUUsU0FBUzs0QkFDYlAsR0FBRzlELEtBQUtzRSxLQUFLLEdBQUcsTUFBTS9DLFdBQVcsQ0FBQ2dCLEtBQUs7NEJBQ3ZDMEIsR0FBRyxLQUFPTSxnQkFBZ0IsR0FBRyxNQUFPLElBQUtoRCxXQUFXLENBQUNnQixLQUFLOzRCQUMxRDRCLEdBQ0UsQ0FBRW5FLEtBQUt1RSxnQkFBZ0IsR0FDckJ2RSxLQUFLc0UsS0FBSyxHQUFHLE1BQU0sSUFDbkJ0RSxLQUFLdUUsZ0JBQWdCLEdBQUcsR0FBRSxJQUMxQixJQUNGaEQsV0FBVyxDQUFDZ0IsS0FBSzt3QkFDckI7d0JBQ0Esa0JBQWtCO3dCQUNsQixJQUFJaUMsU0FBU25CLEtBQUtvQixHQUFHLENBQ25CSixPQUFPUCxDQUFDLEdBQUdILE9BQU9HLENBQUMsRUFDbkJPLE9BQU9KLENBQUMsR0FBR04sT0FBT00sQ0FBQyxFQUNuQkksT0FBT0YsQ0FBQyxHQUFHUixPQUFPUSxDQUFDO3dCQUVyQixxQkFBcUI7d0JBQ3JCdkMsUUFBUUksV0FBVyxDQUFDMEMsT0FBTyxDQUFDLENBQUNoQjs0QkFDM0IsTUFBTWlCLFVBQVVqQixHQUFHekIsVUFBVSxDQUFDQyxTQUFTLENBQUN1QixJQUFJLENBQzFDLENBQUNtQixLQUFPQSxHQUFHQyxRQUFRLEtBQUs7NEJBRTFCLElBQUlGLFdBQVdqQixHQUFHTSxRQUFRLEdBQUdRLFNBQVMsS0FBSztnQ0FDekNBLFNBQVNuQixLQUFLb0IsR0FBRyxDQUFDRCxRQUFRLE1BQU1kLEdBQUdNLFFBQVE7NEJBQzdDO3dCQUNGO3dCQUNBLHVCQUF1Qjt3QkFDdkJwQyxRQUFRSSxXQUFXLEdBQUdKLFFBQVFJLFdBQVcsQ0FBQ2hCLEdBQUcsQ0FBQyxDQUFDMEMsS0FBUTtnQ0FDckQsR0FBR0EsRUFBRTtnQ0FDTE0sVUFBVVgsS0FBS3lCLEtBQUssQ0FBQ3BCLEdBQUdNLFFBQVEsR0FBR1E7NEJBQ3JDO29CQUNGO29CQUVBOUIsS0FBS2QsT0FBTyxHQUFHO3dCQUFFZSxTQUFTOzRCQUFFeEMsSUFBSXlCLFFBQVF6QixFQUFFO3dCQUFDO29CQUFFO2dCQUMvQyxPQUdLLElBQUlvQyxTQUFTLGFBQWE7b0JBQzdCLE1BQU1NLE9BQU9iLFlBQVljLE1BQU0sQ0FDN0IsQ0FBQ1QsSUFDQ0EsRUFBRTBCLE9BQU8sSUFBSSxNQUNiMUIsRUFBRUgsU0FBUyxDQUFDdUIsSUFBSSxDQUFDLENBQUNtQixLQUNoQjtnQ0FBQztnQ0FBVzs2QkFBUSxDQUFDeEIsUUFBUSxDQUFDd0IsR0FBR0MsUUFBUTtvQkFHL0MsSUFBSWhDLEtBQUszQixNQUFNLEVBQUU7d0JBQ2YsTUFBTTZELE1BQU1sQyxJQUFJLENBQUNRLEtBQUtDLEtBQUssQ0FBQ0QsS0FBS0UsTUFBTSxLQUFLVixLQUFLM0IsTUFBTSxFQUFFO3dCQUN6RCxNQUFNOEQsTUFBTTNCLEtBQUtvQixHQUFHLENBQ2xCLEtBQ0FwQixLQUFLeUIsS0FBSyxDQUNSLEtBQU1SLEtBQUssR0FBRyxNQUFNL0MsV0FBVyxDQUFDZ0IsS0FBSyxHQUFLd0MsQ0FBQUEsSUFBSWhCLE9BQU8sR0FBRyxHQUFFO3dCQUc5RHJCLEtBQUt1QyxlQUFlLEdBQUc7NEJBQ3JCQyxRQUFRO2dDQUNOO29DQUNFakQsWUFBWTt3Q0FBRVUsU0FBUzs0Q0FBRXhDLElBQUk0RSxJQUFJNUUsRUFBRTt3Q0FBQztvQ0FBRTtvQ0FDdEM2RCxVQUFVZ0I7Z0NBQ1o7NkJBQ0Q7d0JBQ0g7b0JBQ0Y7Z0JBQ0Y7Z0JBRUEsbUNBQW1DO2dCQUNuQzVDLFVBQVUrQyxJQUFJLENBQUNuRyxpRUFBcUIsQ0FBQ2tHLE1BQU0sQ0FBQztvQkFBRXhDO2dCQUFLO1lBQ3JEO1FBQ0Y7UUFFQSx3Q0FBd0M7UUFDeEMsTUFBTTBDLFFBQVFDLEdBQUcsQ0FBQ2pEO1FBRWxCLE9BQU85QyxJQUNKRyxNQUFNLENBQUMsS0FDUEMsSUFBSSxDQUFDO1lBQUVDLFNBQVM7UUFBc0M7SUFDM0QsRUFBRSxPQUFPMkYsS0FBSztRQUNaQyxRQUFRQyxLQUFLLENBQUMsNEJBQTRCRjtRQUMxQyxPQUFPaEcsSUFDSkcsTUFBTSxDQUFDLEtBQ1BDLElBQUksQ0FBQztZQUFFQyxTQUFTO1FBQXVDO0lBQzVEO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b2xtZXJyb21haW4vRGVza3RvcC9tYXRyYW5zZm9ybWF0aW9uLXN0YXJ0ZXIvcGFnZXMvYXBpL21lbnUvZ2VuZXJlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBwYWdlcy9hcGkvbWVudS9nZW5lcmVyLmpzXG5cbmltcG9ydCBwcmlzbWEgZnJvbSBcIi4uLy4uLy4uL2xpYi9wcmlzbWFcIjtcbmltcG9ydCB7IHN0YXJ0T2ZXZWVrLCBlbmRPZldlZWssIGFkZERheXMgfSBmcm9tIFwiZGF0ZS1mbnNcIjtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICBpZiAocmVxLm1ldGhvZCAhPT0gXCJQT1NUXCIpIHtcbiAgICByZXMuc2V0SGVhZGVyKFwiQWxsb3dcIiwgW1wiUE9TVFwiXSk7XG4gICAgcmV0dXJuIHJlc1xuICAgICAgLnN0YXR1cyg0MDUpXG4gICAgICAuanNvbih7IG1lc3NhZ2U6IGBNw6l0aG9kZSAke3JlcS5tZXRob2R9IG5vbiBhdXRvcmlzw6llYCB9KTtcbiAgfVxuXG4gIC8vIE9uIHLDqWN1cMOocmUgdXNlcklkIGV0LCBzaSBmb3VybmksIHdlZWtTdGFydCBlbiBJU09cbiAgY29uc3QgeyB1c2VySWQsIHdlZWtTdGFydDogd2Vla1N0YXJ0SXNvIH0gPSByZXEuYm9keTtcbiAgaWYgKCF1c2VySWQpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcInVzZXJJZCBtYW5xdWFudC5cIiB9KTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8gMSkgVsOpcmlmaWVyIHF1ZSBs4oCZdXRpbGlzYXRldXIgZXhpc3RlXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogdXNlcklkIH0gfSk7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIlV0aWxpc2F0ZXVyIG5vbiB0cm91dsOpLlwiIH0pO1xuICAgIH1cblxuICAgIC8vIDIpIENhbGN1bGVyIGTDqWJ1dCBldCBmaW4gZGUgbGEgc2VtYWluZSA6XG4gICAgLy8gICAgc2kgd2Vla1N0YXJ0SXNvIGVzdCBwYXNzw6ksIG9uIGwndXRpbGlzZSwgc2lub24gb24gcHJlbmQgdG9kYXkuXG4gICAgY29uc3QgYmFzZURhdGUgPSB3ZWVrU3RhcnRJc28gPyBuZXcgRGF0ZSh3ZWVrU3RhcnRJc28pIDogbmV3IERhdGUoKTtcbiAgICBjb25zdCB3ZWVrU3RhcnQgPSBzdGFydE9mV2VlayhiYXNlRGF0ZSwgeyB3ZWVrU3RhcnRzT246IDEgfSk7XG4gICAgY29uc3Qgd2Vla0VuZCAgID0gZW5kT2ZXZWVrKHdlZWtTdGFydCwgIHsgd2Vla1N0YXJ0c09uOiAxIH0pO1xuXG4gICAgLy8gMykgUsOpY3Vww6lyZXIgbGVzIG1lbnVzIGV4aXN0YW50cyBwb3VyIHBvdXZvaXIgc3VwcHJpbWVyIGxldXJzIGFjY29tcGFnbmVtZW50c1xuICAgIGNvbnN0IHRvUmVtb3ZlID0gYXdhaXQgcHJpc21hLm1lbnVKb3VybmFsaWVyLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgZGF0ZTogeyBndGU6IHdlZWtTdGFydCwgbHRlOiB3ZWVrRW5kIH0sXG4gICAgICB9LFxuICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlIH0sXG4gICAgfSk7XG4gICAgY29uc3QgbWVudUlkcyA9IHRvUmVtb3ZlLm1hcCgobSkgPT4gbS5pZCk7XG5cbiAgICAvLyA0KSBTdXBwcmltZXIgZOKAmWFib3JkIHRvdXMgbGVzIGFjY29tcGFnbmVtZW50cyBsacOpc1xuICAgIGlmIChtZW51SWRzLmxlbmd0aCkge1xuICAgICAgYXdhaXQgcHJpc21hLmFjY29tcGFnbmVtZW50LmRlbGV0ZU1hbnkoe1xuICAgICAgICB3aGVyZTogeyBtZW51SWQ6IHsgaW46IG1lbnVJZHMgfSB9LFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gNSkgUHVpcyBzdXBwcmltZXIgbGVzIG1lbnVzIGV1eOKAkW3Dqm1lc1xuICAgIGF3YWl0IHByaXNtYS5tZW51Sm91cm5hbGllci5kZWxldGVNYW55KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgZGF0ZTogeyBndGU6IHdlZWtTdGFydCwgbHRlOiB3ZWVrRW5kIH0sXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gNikgUHLDqXBhcmVyIGxhIGfDqW7DqXJhdGlvblxuICAgIGNvbnN0IHJlcGFydGl0aW9uID0ge1xuICAgICAgXCJwZXRpdC1kZWpldW5lclwiOiAwLjMsXG4gICAgICBkZWpldW5lcjogICAgICAgICAwLjQsXG4gICAgICBjb2xsYXRpb246ICAgICAgICAwLjA1LFxuICAgICAgZGluZXI6ICAgICAgICAgICAgMC4yNSxcbiAgICB9O1xuXG4gICAgLy8gNykgQ2hhcmdlciB0b3V0ZXMgbGVzIHJlY2V0dGVzICsgaW5ncsOpZGllbnRzICsgc2lkZVR5cGVzICsgYWxsb3dlZFNpZGVzXG4gICAgY29uc3QgcmVjZXR0ZXMgPSBhd2FpdCBwcmlzbWEucmVjZXR0ZS5maW5kTWFueSh7XG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIGNhdGVnb3JpZXM6IHsgaW5jbHVkZTogeyBjYXRlZ29yeTogdHJ1ZSB9IH0sXG4gICAgICAgIGluZ3JlZGllbnRzOiB7XG4gICAgICAgICAgaW5jbHVkZTogeyBpbmdyZWRpZW50OiB7IGluY2x1ZGU6IHsgc2lkZVR5cGVzOiB0cnVlIH0gfSB9LFxuICAgICAgICB9LFxuICAgICAgICBhbGxvd2VkU2lkZXM6IHRydWUsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gOCkgQ2hhcmdlciB0b3VzIGxlcyBpbmdyw6lkaWVudHMgKHBvdXIgY29sbGF0aW9uKVxuICAgIGNvbnN0IGluZ3JlZGllbnRzID0gYXdhaXQgcHJpc21hLmluZ3JlZGllbnQuZmluZE1hbnkoe1xuICAgICAgaW5jbHVkZTogeyBzaWRlVHlwZXM6IHRydWUgfSxcbiAgICB9KTtcblxuICAgIC8vIDkpIENvbnN0cnVpcmUgbGVzIGNyw6lhdGlvbnNcbiAgICBjb25zdCBjcmVhdGlvbnMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDc7IGkrKykge1xuICAgICAgY29uc3QgZGF5ID0gYWRkRGF5cyh3ZWVrU3RhcnQsIGkpO1xuXG4gICAgICBmb3IgKGNvbnN0IHR5cGUgb2YgT2JqZWN0LmtleXMocmVwYXJ0aXRpb24pKSB7XG4gICAgICAgIC8vIGJhc2UgZGVzIGRvbm7DqWVzIMOgIGNyw6llclxuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgIHVzZXI6ICAgICAgeyBjb25uZWN0OiB7IGlkOiB1c2VySWQgfSB9LFxuICAgICAgICAgIGRhdGU6ICAgICAgZGF5LFxuICAgICAgICAgIHJlcGFzVHlwZTogdHlwZSxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyA5LjEpIENob2l4IGRlIGxhIHJlY2V0dGUgKHNhdWYgY29sbGF0aW9uKVxuICAgICAgICBsZXQgcmVjZXR0ZSA9IG51bGw7XG4gICAgICAgIGlmICh0eXBlICE9PSBcImNvbGxhdGlvblwiKSB7XG4gICAgICAgICAgY29uc3QgcG9vbCA9IHJlY2V0dGVzLmZpbHRlcigocikgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2F0cyA9IHIuY2F0ZWdvcmllcy5tYXAoKGMpID0+XG4gICAgICAgICAgICAgIGMuY2F0ZWdvcnkubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09IFwicGV0aXQtZGVqZXVuZXJcIikge1xuICAgICAgICAgICAgICByZXR1cm4gY2F0cy5pbmNsdWRlcyhcInBldGl0IGTDqWpldW5lclwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgIWNhdHMuaW5jbHVkZXMoXCJwZXRpdCBkw6lqZXVuZXJcIikgJiZcbiAgICAgICAgICAgICAgICAhY2F0cy5pbmNsdWRlcyhcImNvbGxhdGlvblwiKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmIChwb29sLmxlbmd0aCkge1xuICAgICAgICAgICAgcmVjZXR0ZSA9IHBvb2xbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcG9vbC5sZW5ndGgpXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyA5LjIpIFNpIG9uIGEgdW5lIHJlY2V0dGUsIG9uIGFwcGxpcXVlIHNjYWxhYmlsaXTDqSArIGNsYW1wIERBSVJZICsgY29ubmVjdFxuICAgICAgICBpZiAocmVjZXR0ZSkge1xuICAgICAgICAgIGNvbnN0IGhhc0VnZyA9IHJlY2V0dGUuaW5ncmVkaWVudHMuc29tZSgocmkpID0+XG4gICAgICAgICAgICByaS5pbmdyZWRpZW50Lm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcIm9ldWZcIilcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgaWYgKCFoYXNFZ2cpIHtcbiAgICAgICAgICAgIC8vIGNhbGN1bCBkZXMgdG90YXV4XG4gICAgICAgICAgICBjb25zdCB0b3RhbHMgPSByZWNldHRlLmluZ3JlZGllbnRzLnJlZHVjZShcbiAgICAgICAgICAgICAgKHMsIHJpKSA9PiAoe1xuICAgICAgICAgICAgICAgIHA6IHMucCArIChyaS5pbmdyZWRpZW50LnByb3RlaW4gKiByaS5xdWFudGl0eSkgLyAxMDAsXG4gICAgICAgICAgICAgICAgZjogcy5mICsgKHJpLmluZ3JlZGllbnQuZmF0ICAgICAqIHJpLnF1YW50aXR5KSAvIDEwMCxcbiAgICAgICAgICAgICAgICBnOiBzLmcgKyAocmkuaW5ncmVkaWVudC5jYXJicyAgICogcmkucXVhbnRpdHkpIC8gMTAwLFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgeyBwOiAwLCBmOiAwLCBnOiAwIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICAvLyBvYmplY3RpZnNcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IHtcbiAgICAgICAgICAgICAgcDogdXNlci5wb2lkcyAqIDEuOCAqIHJlcGFydGl0aW9uW3R5cGVdLFxuICAgICAgICAgICAgICBmOiAoKHVzZXIubWV0YWJvbGlzbWVDaWJsZSAqIDAuMykgLyA5KSAqIHJlcGFydGl0aW9uW3R5cGVdLFxuICAgICAgICAgICAgICBnOlxuICAgICAgICAgICAgICAgICgodXNlci5tZXRhYm9saXNtZUNpYmxlIC1cbiAgICAgICAgICAgICAgICAgIHVzZXIucG9pZHMgKiAxLjggKiA0IC1cbiAgICAgICAgICAgICAgICAgIHVzZXIubWV0YWJvbGlzbWVDaWJsZSAqIDAuMykgL1xuICAgICAgICAgICAgICAgICAgNCkgKlxuICAgICAgICAgICAgICAgIHJlcGFydGl0aW9uW3R5cGVdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIGZhY3RldXIgbWluaW1hbFxuICAgICAgICAgICAgbGV0IGZhY3RvciA9IE1hdGgubWluKFxuICAgICAgICAgICAgICB0YXJnZXQucCAvIHRvdGFscy5wLFxuICAgICAgICAgICAgICB0YXJnZXQuZiAvIHRvdGFscy5mLFxuICAgICAgICAgICAgICB0YXJnZXQuZyAvIHRvdGFscy5nXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgLy8gY2xhbXAgREFJUlkgw6AgMTUwZ1xuICAgICAgICAgICAgcmVjZXR0ZS5pbmdyZWRpZW50cy5mb3JFYWNoKChyaSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBpc0RhaXJ5ID0gcmkuaW5ncmVkaWVudC5zaWRlVHlwZXMuc29tZShcbiAgICAgICAgICAgICAgICAoc3QpID0+IHN0LnNpZGVUeXBlID09PSBcIkRBSVJZXCJcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgaWYgKGlzRGFpcnkgJiYgcmkucXVhbnRpdHkgKiBmYWN0b3IgPiAxNTApIHtcbiAgICAgICAgICAgICAgICBmYWN0b3IgPSBNYXRoLm1pbihmYWN0b3IsIDE1MCAvIHJpLnF1YW50aXR5KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBhcHBsaXF1ZXIgbGUgZmFjdGV1clxuICAgICAgICAgICAgcmVjZXR0ZS5pbmdyZWRpZW50cyA9IHJlY2V0dGUuaW5ncmVkaWVudHMubWFwKChyaSkgPT4gKHtcbiAgICAgICAgICAgICAgLi4ucmksXG4gICAgICAgICAgICAgIHF1YW50aXR5OiBNYXRoLnJvdW5kKHJpLnF1YW50aXR5ICogZmFjdG9yKSxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkYXRhLnJlY2V0dGUgPSB7IGNvbm5lY3Q6IHsgaWQ6IHJlY2V0dGUuaWQgfSB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gOS4zKSBTaSBj4oCZZXN0IHVuZSBjb2xsYXRpb24sIG9uIGFqb3V0ZSB1biBhY2NvbXBhZ25lbWVudCBhdXRvXG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT09IFwiY29sbGF0aW9uXCIpIHtcbiAgICAgICAgICBjb25zdCBwb29sID0gaW5ncmVkaWVudHMuZmlsdGVyKFxuICAgICAgICAgICAgKGkpID0+XG4gICAgICAgICAgICAgIGkucHJvdGVpbiA+PSAxMCAmJlxuICAgICAgICAgICAgICBpLnNpZGVUeXBlcy5zb21lKChzdCkgPT5cbiAgICAgICAgICAgICAgICBbXCJQUk9URUlOXCIsIFwiREFJUllcIl0uaW5jbHVkZXMoc3Quc2lkZVR5cGUpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmIChwb29sLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgaW5nID0gcG9vbFtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb29sLmxlbmd0aCldO1xuICAgICAgICAgICAgY29uc3QgcXR5ID0gTWF0aC5taW4oXG4gICAgICAgICAgICAgIDE1MCxcbiAgICAgICAgICAgICAgTWF0aC5yb3VuZChcbiAgICAgICAgICAgICAgICAodXNlci5wb2lkcyAqIDEuOCAqIHJlcGFydGl0aW9uW3R5cGVdKSAvIChpbmcucHJvdGVpbiAvIDEwMClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGRhdGEuYWNjb21wYWduZW1lbnRzID0ge1xuICAgICAgICAgICAgICBjcmVhdGU6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBpbmdyZWRpZW50OiB7IGNvbm5lY3Q6IHsgaWQ6IGluZy5pZCB9IH0sXG4gICAgICAgICAgICAgICAgICBxdWFudGl0eTogcXR5LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG9uIGFqb3V0ZSBsYSBjcsOpYXRpb24gw6AgbGEgbGlzdGVcbiAgICAgICAgY3JlYXRpb25zLnB1c2gocHJpc21hLm1lbnVKb3VybmFsaWVyLmNyZWF0ZSh7IGRhdGEgfSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIDEwKSBMYW5jZXIgbGVzIGNyw6lhdGlvbnMgZW4gcGFyYWxsw6hsZVxuICAgIGF3YWl0IFByb21pc2UuYWxsKGNyZWF0aW9ucyk7XG5cbiAgICByZXR1cm4gcmVzXG4gICAgICAuc3RhdHVzKDIwMClcbiAgICAgIC5qc29uKHsgbWVzc2FnZTogXCJNZW51IGfDqW7DqXLDqSBhdmVjIHLDqGdsZXMgYXBwbGlxdcOpZXMuXCIgfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgZ8OpbsOpcmF0aW9uIG1lbnUgOlwiLCBlcnIpO1xuICAgIHJldHVybiByZXNcbiAgICAgIC5zdGF0dXMoNTAwKVxuICAgICAgLmpzb24oeyBtZXNzYWdlOiBcIkVycmV1ciBzZXJ2ZXVyIGxvcnMgZGUgbGEgZ8OpbsOpcmF0aW9uXCIgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJwcmlzbWEiLCJzdGFydE9mV2VlayIsImVuZE9mV2VlayIsImFkZERheXMiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic2V0SGVhZGVyIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJ1c2VySWQiLCJ3ZWVrU3RhcnQiLCJ3ZWVrU3RhcnRJc28iLCJib2R5IiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImlkIiwiYmFzZURhdGUiLCJEYXRlIiwid2Vla1N0YXJ0c09uIiwid2Vla0VuZCIsInRvUmVtb3ZlIiwibWVudUpvdXJuYWxpZXIiLCJmaW5kTWFueSIsImRhdGUiLCJndGUiLCJsdGUiLCJzZWxlY3QiLCJtZW51SWRzIiwibWFwIiwibSIsImxlbmd0aCIsImFjY29tcGFnbmVtZW50IiwiZGVsZXRlTWFueSIsIm1lbnVJZCIsImluIiwicmVwYXJ0aXRpb24iLCJkZWpldW5lciIsImNvbGxhdGlvbiIsImRpbmVyIiwicmVjZXR0ZXMiLCJyZWNldHRlIiwiaW5jbHVkZSIsImNhdGVnb3JpZXMiLCJjYXRlZ29yeSIsImluZ3JlZGllbnRzIiwiaW5ncmVkaWVudCIsInNpZGVUeXBlcyIsImFsbG93ZWRTaWRlcyIsImNyZWF0aW9ucyIsImkiLCJkYXkiLCJ0eXBlIiwiT2JqZWN0Iiwia2V5cyIsImRhdGEiLCJjb25uZWN0IiwicmVwYXNUeXBlIiwicG9vbCIsImZpbHRlciIsInIiLCJjYXRzIiwiYyIsIm5hbWUiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiaGFzRWdnIiwic29tZSIsInJpIiwidG90YWxzIiwicmVkdWNlIiwicyIsInAiLCJwcm90ZWluIiwicXVhbnRpdHkiLCJmIiwiZmF0IiwiZyIsImNhcmJzIiwidGFyZ2V0IiwicG9pZHMiLCJtZXRhYm9saXNtZUNpYmxlIiwiZmFjdG9yIiwibWluIiwiZm9yRWFjaCIsImlzRGFpcnkiLCJzdCIsInNpZGVUeXBlIiwicm91bmQiLCJpbmciLCJxdHkiLCJhY2NvbXBhZ25lbWVudHMiLCJjcmVhdGUiLCJwdXNoIiwiUHJvbWlzZSIsImFsbCIsImVyciIsImNvbnNvbGUiLCJlcnJvciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/menu/generer.js\n");

/***/ }),

/***/ "(api-node)/__barrel_optimize__?names=addDays,endOfWeek,startOfWeek!=!./node_modules/date-fns/index.js":
/*!**************************************************************************************************!*\
  !*** __barrel_optimize__?names=addDays,endOfWeek,startOfWeek!=!./node_modules/date-fns/index.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addDays: () => (/* reexport safe */ _Users_wolmerromain_Desktop_matransformation_starter_node_modules_date_fns_addDays_js__WEBPACK_IMPORTED_MODULE_0__.addDays),\n/* harmony export */   endOfWeek: () => (/* reexport safe */ _Users_wolmerromain_Desktop_matransformation_starter_node_modules_date_fns_endOfWeek_js__WEBPACK_IMPORTED_MODULE_1__.endOfWeek),\n/* harmony export */   startOfWeek: () => (/* reexport safe */ _Users_wolmerromain_Desktop_matransformation_starter_node_modules_date_fns_startOfWeek_js__WEBPACK_IMPORTED_MODULE_2__.startOfWeek)\n/* harmony export */ });\n/* harmony import */ var _Users_wolmerromain_Desktop_matransformation_starter_node_modules_date_fns_addDays_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/date-fns/addDays.js */ \"(api-node)/./node_modules/date-fns/addDays.js\");\n/* harmony import */ var _Users_wolmerromain_Desktop_matransformation_starter_node_modules_date_fns_endOfWeek_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./node_modules/date-fns/endOfWeek.js */ \"(api-node)/./node_modules/date-fns/endOfWeek.js\");\n/* harmony import */ var _Users_wolmerromain_Desktop_matransformation_starter_node_modules_date_fns_startOfWeek_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./node_modules/date-fns/startOfWeek.js */ \"(api-node)/./node_modules/date-fns/startOfWeek.js\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS9fX2JhcnJlbF9vcHRpbWl6ZV9fP25hbWVzPWFkZERheXMsZW5kT2ZXZWVrLHN0YXJ0T2ZXZWVrIT0hLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUMrRztBQUNJIiwic291cmNlcyI6WyIvVXNlcnMvd29sbWVycm9tYWluL0Rlc2t0b3AvbWF0cmFuc2Zvcm1hdGlvbi1zdGFydGVyL25vZGVfbW9kdWxlcy9kYXRlLWZucy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmV4cG9ydCB7IGFkZERheXMgfSBmcm9tIFwiL1VzZXJzL3dvbG1lcnJvbWFpbi9EZXNrdG9wL21hdHJhbnNmb3JtYXRpb24tc3RhcnRlci9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvYWRkRGF5cy5qc1wiXG5leHBvcnQgeyBlbmRPZldlZWsgfSBmcm9tIFwiL1VzZXJzL3dvbG1lcnJvbWFpbi9EZXNrdG9wL21hdHJhbnNmb3JtYXRpb24tc3RhcnRlci9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZW5kT2ZXZWVrLmpzXCJcbmV4cG9ydCB7IHN0YXJ0T2ZXZWVrIH0gZnJvbSBcIi9Vc2Vycy93b2xtZXJyb21haW4vRGVza3RvcC9tYXRyYW5zZm9ybWF0aW9uLXN0YXJ0ZXIvbm9kZV9tb2R1bGVzL2RhdGUtZm5zL3N0YXJ0T2ZXZWVrLmpzXCIiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/__barrel_optimize__?names=addDays,endOfWeek,startOfWeek!=!./node_modules/date-fns/index.js\n");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/date-fns"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmenu%2Fgenerer&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fmenu%2Fgenerer.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();